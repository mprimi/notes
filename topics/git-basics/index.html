<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        
        <meta name="author" content="Marco Primi">
        <link rel="canonical" href="https://notes.mpri.me/topics/git-basics/">
        <link rel="shortcut icon" href="../../img/favicon.ico">
        <title>Personal document management with `git` - Marco's Notes</title>
        <link href="../../css/bootstrap.min.css" rel="stylesheet">
        <link href="../../css/font-awesome.min.css" rel="stylesheet">
        <link href="../../css/base.css" rel="stylesheet">
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/github.min.css">

        <script src="../../js/jquery-1.10.2.min.js" defer></script>
        <script src="../../js/bootstrap.min.js" defer></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js"></script>
        <script>hljs.initHighlightingOnLoad();</script> 
    </head>

    <body>
        <div class="navbar fixed-top navbar-expand-lg navbar-dark bg-primary">
            <div class="container">
                <a class="navbar-brand" href="../..">Marco's Notes</a>
                <!-- Expander button -->
                <button type="button" class="navbar-toggler" data-toggle="collapse" data-target="#navbar-collapse">
                    <span class="navbar-toggler-icon"></span>
                </button>

                <!-- Expanded navigation -->
                <div id="navbar-collapse" class="navbar-collapse collapse">
                        <!-- Main navigation -->
                        <ul class="nav navbar-nav">
                            <li class="dropdown">
                                <a href="#" class="nav-link dropdown-toggle" data-toggle="dropdown">‚ù§Ô∏è Favorites <b class="caret"></b></a>
                                <ul class="dropdown-menu">
                                    
<li>
    <a href="../../favorites/art/" class="dropdown-item">Art and Design</a>
</li>
                                    
<li>
    <a href="../../favorites/articles/" class="dropdown-item">Articles</a>
</li>
                                    
<li>
    <a href="../../favorites/books/" class="dropdown-item">Books</a>
</li>
                                    
<li>
    <a href="../../favorites/lectures/" class="dropdown-item">Lectures and Talks</a>
</li>
                                    
<li>
    <a href="../../favorites/podcasts/" class="dropdown-item">Podcasts</a>
</li>
                                    
<li>
    <a href="../../favorites/projects-and-initiatives/" class="dropdown-item">Projects and initiatives</a>
</li>
                                    
<li>
    <a href="../../favorites/webcomics/" class="dropdown-item">Webcomics</a>
</li>
                                </ul>
                            </li>
                            <li class="dropdown">
                                <a href="#" class="nav-link dropdown-toggle" data-toggle="dropdown">ü¶ã Thoughts <b class="caret"></b></a>
                                <ul class="dropdown-menu">
                                    
<li>
    <a href="../../diary/" class="dropdown-item">üìì „Éª Diary</a>
</li>
                                    
<li>
    <a href="../" class="dropdown-item">üìö „Éª Topics</a>
</li>
                                </ul>
                            </li>
                            <li class="navitem">
                                <a href="../../logs/" class="nav-link">üß≠ Logs</a>
                            </li>
                            <li class="navitem">
                                <a href="../../everything-else/" class="nav-link">üóÉ Everything else</a>
                            </li>
                        </ul>

                    <ul class="nav navbar-nav ml-auto">
                        <li class="nav-item">
                            <a href="#" class="nav-link" data-toggle="modal" data-target="#mkdocs_search_modal">
                                <i class="fa fa-search"></i> Search
                            </a>
                        </li>
                    </ul>
                </div>
            </div>
        </div>

        <div class="container">
            <div class="row">
	<div class="col-md-12" role="main">

<h1 id="personal-document-management-with-git">Personal document management with <code>git</code></h1>
<p>This tutorial is for my dear friend M.
Like any person working on computers, M. struggles with keeping track of changes to files.</p>
<p>This is the simplest possible tutorial that explains how to leverage <code>git</code> for very simple personal projects.</p>
<p>This tutorial covers:
 - Versioning of a small set of files for a single person. i.e. personal notes/essay/homeworks/article, ...
 - Inspecting and restoring of old versions
 - Backups and sharing with others via cloud</p>
<p>This tutorial does NOT cover branching, stashes, resolving conflicts, merge strategies, rewriting history, pulling from remote, fixups, aliases, configuration, etc. There are millions of tutorials out there that can teach you these advanced topics.</p>
<h2 id="old-school-versioning">üìú Old school versioning</h2>
<p>We've all done this at some point, it looks something like this:</p>
<pre><code>letter.txt
letter-2.txt
letter-3.txt
letter-v4.txt
letter-v4-with-edits.txt
letter-v4-final.txt
letter-v4-final-with-images.txt
...
</code></pre>
<blockquote>
<p>Quiz: In this example, which file is the latest and greatest version? I don't know, and neither do you! If you're using old school versioning, make damn sure you give a <em>unique</em> version number every time you create a new version!</p>
</blockquote>
<p>This versioning strategy works ok with single-file projects.
It creates some little clutter, wastes space on disk and <a href="https://physics.stackexchange.com/questions/31326/is-a-hard-drive-heavier-when-it-is-full">makes your laptop heavier to carry</a>). But that seems acceptable.</p>
<p>This approach breaks down as soon as your project consists of multiple files.
One could apply the same "versioning" strategy to the entire folder.</p>
<h2 id="the-right-tool-for-the-job">ü™õ The right tool for the job</h2>
<p>To me, using file copies to version files is using a hammer to drive a screw.
If you need to drive a screw, use a screwdriver.
If you need to version files, use <code>git</code>.</p>
<h2 id="git-vs-github"><code>git</code> vs. GitHub</h2>
<p><code>git</code> is a tool installed on your computer. You may use it in a terminal or with a GUI.
<code>git</code> transforms a folder into a little database and then uses that database to store and manage your versions.</p>
<p>You can definitely use <code>git</code> without GitHub.
You should probably learn to use <code>git</code> before you even look at GitHub.</p>
<p>GitHub is a service from Microsoft. GitLab, BitBucket, and many others offer similar services.</p>
<p>What you get with GitHub:
 * Backups in the cloud -- if you regularly synchronize your <code>git</code> projects with GH, then they are safely backed up if your computer is stolen or catches on fire
 * Web -- GH creates a website around your repository, so you can easily share a link with a friend, e.g.: https://github.com/mprimi/notes/blob/main/README.md, rather than having to send the file via email.
 * Collaboration -- i can clone your repository, or send you patches for bugs I spot in your code, etc. collaboration is the main reason for hosting a project on a platform like GitHub, but it's beyond the scope of this document</p>
<h1 id="3-2-1-lets-git">3, 2, 1, let's <code>git</code>!</h1>
<p>Without further ado, let's cover the very basics of <code>git</code>.</p>
<h2 id="my-recipesgit">üç≥ <code>my-recipes.git</code></h2>
<p>Let's say you have a bunch of cooking recipes you've collected over the years. They are stored in a Word document on your laptop.</p>
<pre><code>recipes.adoc
</code></pre>
<h3 id="a-note-on-convention">A note on convention</h3>
<p>If there is a <code>$</code> character at the beginning of a line, it's a prompt.
It means i issued a command. If there is no <code>$</code>, then it's the command output.
Lines begining with <code>#</code> are comments
Example:</p>
<pre><code class="language-sh"># This is a comment
$ echo foo     &lt;= This is me issuing the command
foo            &lt;= This is the output of the command
</code></pre>
<p>Let's see how to transfer and manage this knowledge-base with <code>git</code>.</p>
<h2 id="1-create-a-repository">1. Create a repository</h2>
<p>A repository is a special folder that acts as a database.</p>
<p>I like to name my repository folder <code>project-name.git</code> to easily tell distinguish a regular folder from a repository folder. But this is just personal preference, you can name your repository however you want.</p>
<pre><code class="language-sh"># Create the new empty folder
$ mkdir my-recipes.git

# Enter the directory (the rest of commands are issued from within)

# Turn the current folder (.) into a git repository
$ git init .
</code></pre>
<p>Congratulations, you just created your first repository.
This still just looks like an empty folder, but it's not: <code>git</code> initialized an database inside a hidden folder (<code>my-recipes.git/.git/</code>).</p>
<p>You don't need to know what is inside this hidden folder.
You never interact with it directly.
But it's useful to know this is where <code>git</code> does its magic (stores all your versions and other metadata).</p>
<h2 id="2-add-your-existing-document">2. Add your existing document</h2>
<p>One way to look think of <code>git</code> is:
 <strong><em>If you would like to go back to something at some point in the future, then commit it!</em></strong></p>
<p>You may at some point in the future want to retrieve your original Word document, so let's commit it!</p>
<pre><code># Copy the original recipes into the repository folder.
$ cp ~/Documents/recipes.adoc .
</code></pre>
<p>Rather than moving the original file (<code>~/Documents/recipes.adoc</code>) in the repo, I made a copy. Just in case. You really don't want to lose it while you mess up with <code>git</code> for the first time. We can always delete it later.</p>
<p>Let's look at the status of your repository folder:</p>
<pre><code>$ git status
On branch master

No commits yet

Untracked files:
  (use &quot;git add &lt;file&gt;...&quot; to include in what will be committed)
    recipes.adoc

nothing added to commit but untracked files present (use &quot;git add&quot; to track)
</code></pre>
<p>Let's explain line by line:</p>
<pre><code>$ git status
</code></pre>
<p>I'm invoking the <code>status</code> command of <code>git</code>. Which prints an overview of the status of the local repository folder (there are many more commands, ignore them for now, but if you are curious, try <code>git help</code> which lists them).</p>
<pre><code>On branch master
</code></pre>
<p>Branches are an advanced topic, you don't need to care about them for now.
However, notice your screen may actually say <code>main</code> rather than <code>master</code>. This is a recent change of convention, but for our purposes it's just a name.</p>
<pre><code>No commits yet
</code></pre>
<p>You just created this repo fresh a second ago, so there's no history at all.
If history existed, it would give you a recap of the most recent commit.</p>
<pre><code>Untracked files:
  (use &quot;git add &lt;file&gt;...&quot; to include in what will be committed)
    recipes.adoc
</code></pre>
<p>Git is saying: "there is a file I haven't seen before in this folder: <code>recipes.adoc</code>".
It also suggests "if you want to start versioning this file, use <code>git add</code>.</p>
<pre><code>nothing added to commit but untracked files present (use &quot;git add&quot; to track)
</code></pre>
<p>This is telling you that you have not staged any files or changes for commit.
More on this later.</p>
<p>This <code>status</code> is very verbose, and contains help messages.
For the rest of this document, I'll use the "succint" version, which gives you the same information but more compact:</p>
<pre><code>$ git status --short
?? recipes.adoc
</code></pre>
<p>This says the same as before: there is a file, <code>recipes.adoc</code> and I've never seen it before ('<code>??</code>' means 'untracked').</p>
<h3 id="21-first-stage-and-commit">2.1. First stage and commit</h3>
<p>Creating a new version for your repository is done in 2 steps:</p>
<ol>
<li><strong>Stage</strong>: select the files you want to include in the next version.</li>
<li><strong>Commit</strong>: create the next version of the repository, which consists of the changes/files you staged.</li>
</ol>
<p>We want <code>git</code> to start managing/versioning/tracking your recipes file.</p>
<p>So first let's stage the file:</p>
<pre><code>$ git add recipes.adoc
</code></pre>
<p>This stages the document. Notice it does not make any change whatsoever to the file. This is true for pretty much all the comments in this document: <code>git</code> does NOT modify your files. It just tracks them and makes copies in the "magic" folder.</p>
<p>After adding the file to the index (another way to say staged the file, or added the file), take a look at the status:</p>
<pre><code>$ git st --short
A  recipes.adoc
</code></pre>
<p>It is saying: "a file i've never seen before is staged" A stands for "added".
If you ask for status in the "verbose" mode, it probably says the same with more words:</p>
<pre><code>$ git status
Changes to be committed:
  (use &quot;git rm --cached &lt;file&gt;...&quot; to unstage)
    new file:   recipes.adoc
</code></pre>
<p>This is also telling you how to "unstage".
Removing from the staging also does not delete or modify the file, it just means the file goes back to 'untracked' status.</p>
<p>Our objective for the first version is to put your file under version control.
The file is now staged, so let's go ahead and commit:</p>
<pre><code>$ git commit -m &quot;Adding the original recipes word document&quot;
[master (root-commit) cdab0fc] Adding the original recipes word document
 1 file changed, 0 insertions(+), 0 deletions(-)
 create mode 100644 recipes.adoc
</code></pre>
<p>Commit means "create a new version of the repository with all the changes currently staged".</p>
<p>A commit requires a message: a short description of what changed in this commit.
The message itself doesn't really matter to <code>git</code>. You could say <code>-m "cacca"</code> and it would be perfectly happy with it.</p>
<p>Commit messages are for <strong>you</strong>.
Your repository is going to quickly grow to hundreds of versions, and it's going to be nice to scroll them and know what each commit does just by looking at the message.</p>
<p>Congratulation, you just created the first version of your repository!</p>
<p>Let's look at a <code>status</code> because here is when people can panic.</p>
<pre><code>$ git status
On branch master
nothing to commit, working tree clean
</code></pre>
<p>I can hear you screaming: "WTF? Where did my file go???"</p>
<p>As I said before staging and committing <strong>do not touch the files</strong> they just create metadata.
Your file is still there. Go ahead and check.</p>
<p>It is not showing up in <code>status</code> because the file has no changes. The file you have is identical to the file <code>git</code> knows to be the latest committed version.
So <code>git</code> doesn't even bother showing it to you, <code>git</code> cares more about <em>changes</em> to your directory!</p>
<h2 id="3-multiple-files">3. Multiple files</h2>
<p>At this point, you could be happy with what you have: a repository consisting of a single file.
Every time you modify the file, you could stage and commit, and over time you would have a versioned file, allowing you to go back to revisit previous versions if you made a mistake.</p>
<p>This is good, but let's make it better: split recipes into individual files.</p>
<pre><code>$ touch tiramisu.txt cappone.txt carbonara.txt
</code></pre>
<p>This just creates 3 empty files.</p>
<pre><code>$ git st --short
?? cappone.txt
?? carbonara.txt
</code></pre>
<p>As expected, <code>git</code> is saying: there are 3 files I've never seen before.</p>
<p>Let's add a first version of the recipe. For the sake of this example, I'm starting with a very shitty version of the recipes.</p>
<p>Edit the files to add this content:</p>
<pre><code>Pasta alla Carbonara

1. Cuoci la pasta
2. Aggiungi il sugo
</code></pre>
<pre><code>Cappone della Nonna

1. Spenna il cappone
2. Cuocilo in forno
</code></pre>
<p>Let's check status after adding the recipes:</p>
<pre><code>$ git st --short
?? cappone.txt
?? carbonara.txt
</code></pre>
<p>Same as before: 2 files never seen before.</p>
<p>Let's create a new version of the repository by adding these new files (with the current content) and creating a new commit.</p>
<pre><code>$ git add cappone.txt carbonara.txt
$ git commit -m &quot;Importing carbonara and cappone recipes&quot;
</code></pre>
<p>So far so good. Now that you have some history (2 commits) we can look back at it.</p>
<p>The <code>log</code> command is the goto for looking at repository history (altough GUIs are usually even easier).
The <code>log</code> command has a thousand options, let's stick to the simplest:</p>
<pre><code>$ git log --oneline
41330d2 (HEAD -&gt; master) Importing carbonara and cappone recipes
cdab0fc Adding the original recipes word document
</code></pre>
<p>This list the full history of your repository, most recent on top.</p>
<p>The first code (e.g, <code>41330d2</code>) it's just a unique identifier for each commit. Yours will be different than mine even if the files are identical, because the commit author and date will be different for your commits.</p>
<p>Try this alternative view of history, which includes the files changed summary:</p>
<pre><code>$ git log --stat
</code></pre>
<p>And feel free to explore more <code>log</code> options described in the manual (hit <code>q</code> to exit):</p>
<pre><code>$ git help log
</code></pre>
<h2 id="4-make-history">4. Make history</h2>
<p>A <code>git</code> repository records a set of mutation in a specific order.</p>
<p>Let's make history by changing a file.</p>
<p>Add a step number 3 to the <code>cappone.txt</code> recipe. Edit the file and save.</p>
<p>Status should tell you that the file is different than the last version <code>git</code> is aware of:</p>
<pre><code>$ git status --short
 M cappone.txt
</code></pre>
<p>And the <code>diff</code> command can tell you exactly what changed:</p>
<pre><code>$ git diff
diff --git a/cappone.txt b/cappone.txt
index 825997d..660f0eb 100644
--- a/cappone.txt
+++ b/cappone.txt
@@ -2,3 +2,4 @@ Cappone della Nonna

 1. Spenna il cappone
 2. Cuocilo in forno
+3. Riposa 10 minuti
</code></pre>
<p>Notice the <code>+</code> in front of the last line. It's telling you that you added this line, while the rest of the file is unchanged.</p>
<p>This new version is good, so let's commit it!</p>
<pre><code>$ git add cappone.txt
$ git commit -m &quot;Improved cappone recipe&quot;
</code></pre>
<p>Let's do a different change now, one that touches multiple lines.
Add a new step 1 to the carbonara recipe.</p>
<p>After editing, it should look like this:</p>
<pre><code>$ git diff
diff --git a/carbonara.txt b/carbonara.txt
index 78852c9..700ee0a 100644
--- a/carbonara.txt
+++ b/carbonara.txt
@@ -1,4 +1,5 @@
 Pasta alla Carbonara

-1. Cuoci la pasta
-2. Aggiungi il sugo
+1. Bolli l'aqua
+2. Cuoci la pasta
+3. Aggiungi il sugo
</code></pre>
<p>Notice how <code>git</code> is not showing this as simply adding a line at the top.
It's telling you the two original lines are gone, and 3 new lines were added.</p>
<p>This time, try to stage your changes using "interactive" add:</p>
<pre><code>$ git add -p
diff --git a/carbonara.txt b/carbonara.txt
index 78852c9..700ee0a 100644
--- a/carbonara.txt
+++ b/carbonara.txt
@@ -1,4 +1,5 @@
 Pasta alla Carbonara

-1. Cuoci la pasta
-2. Aggiungi il sugo
+1. Bolli l'aqua
+2. Cuoci la pasta
+3. Aggiungi il sugo
(1/1) Stage this hunk [y,n,q,a,d,e,?]? y

$ git commit -m &quot;Improved carbonara recipe&quot;
</code></pre>
<!--

# Next

https://betterexplained.com/articles/aha-moments-when-learning-git/

# Quiz Time!

## Move a file by accident

## Delete a file by accident

--></div>

            </div>
        </div>

        <footer class="col-md-12">
            <hr>
            <p>Documentation built with <a href="https://www.mkdocs.org/">MkDocs</a>.</p>
        </footer>
        <script>
            var base_url = "../..",
                shortcuts = {"help": 191, "next": 78, "previous": 80, "search": 83};
        </script>
        <script src="../../js/base.js" defer></script>
        <script src="../../search/main.js" defer></script>

        <div class="modal" id="mkdocs_search_modal" tabindex="-1" role="dialog" aria-labelledby="searchModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-lg">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title" id="searchModalLabel">Search</h4>
                <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
            </div>
            <div class="modal-body">
                <p>
                    From here you can search these documents. Enter
                    your search terms below.
                </p>
                <form>
                    <div class="form-group">
                        <input type="search" class="form-control" placeholder="Search..." id="mkdocs-search-query" title="Type search term here">
                    </div>
                </form>
                <div id="mkdocs-search-results"></div>
            </div>
            <div class="modal-footer">
            </div>
        </div>
    </div>
</div><div class="modal" id="mkdocs_keyboard_modal" tabindex="-1" role="dialog" aria-labelledby="keyboardModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title" id="keyboardModalLabel">Keyboard Shortcuts</h4>
                <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
            </div>
            <div class="modal-body">
              <table class="table">
                <thead>
                  <tr>
                    <th style="width: 20%;">Keys</th>
                    <th>Action</th>
                  </tr>
                </thead>
                <tbody>
                  <tr>
                    <td class="help shortcut"><kbd>?</kbd></td>
                    <td>Open this help</td>
                  </tr>
                  <tr>
                    <td class="next shortcut"><kbd>n</kbd></td>
                    <td>Next page</td>
                  </tr>
                  <tr>
                    <td class="prev shortcut"><kbd>p</kbd></td>
                    <td>Previous page</td>
                  </tr>
                  <tr>
                    <td class="search shortcut"><kbd>s</kbd></td>
                    <td>Search</td>
                  </tr>
                </tbody>
              </table>
            </div>
            <div class="modal-footer">
            </div>
        </div>
    </div>
</div>

    </body>
</html>
